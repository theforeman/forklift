---
- name: 'install pvalena/rubygems copr'
  get_url:
    url: https://copr.fedorainfracloud.org/coprs/pvalena/rubygems/repo/epel-{{ ansible_distribution_major_version }}/pvalena-rubygems-epel-{{ ansible_distribution_major_version }}.repo
    dest: /etc/yum.repos.d/pvalena-rubygems.repo

- name: 'install pvalena/vagrant copr'
  get_url:
    url: https://copr.fedorainfracloud.org/coprs/pvalena/vagrant/repo/epel-{{ ansible_distribution_major_version }}/pvalena-vagrant-epel-{{ ansible_distribution_major_version }}.repo
    dest: /etc/yum.repos.d/pvalena-vagrant.repo

- name: 'install rubygem-unf from Foreman repos'
  dnf:
    name: http://koji.katello.org/kojifiles/packages/rubygem-unf/0.1.4/1.el8/noarch/rubygem-unf-0.1.4-1.el8.noarch.rpm
    state: present

- name: 'install vagrant'
  package:
    name: vagrant
    state: present

- name: 'install vagrant-libvirt'
  package:
    name: vagrant-libvirt
    state: present
  when: vagrant_libvirt

- include_tasks: 'vagrant_scp.yml'
  when: vagrant_scp
