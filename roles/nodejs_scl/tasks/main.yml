- name: 'Install SCL repository'
  ansible.builtin.yum:
    name: centos-release-scl-rh
    state: present

- name: 'Install NodeJS SCL'
  ansible.builtin.yum:
    name:
      - "{{ nodejs_scl_version }}-npm"
    state: present

- name: Enable and configure SCL at login
  ansible.builtin.blockinfile:
    dest: /etc/profile.d/enable-{{ nodejs_scl_version }}.sh
    create: yes
    block: |
      #!/bin/bash
      source scl_source enable {{ nodejs_scl_version }}
